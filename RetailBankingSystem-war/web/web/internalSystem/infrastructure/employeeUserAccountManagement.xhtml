<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/onlineBankingTemplate.xhtml">
       <ui:define name="content">
    <h:head>
        <title>Employee Account Management</title>
    </h:head>
    <h:body>
        <p:panel header="Manage User Account">
      
        <h:form>
            <p:menubar>
                <p:submenu label="Manage My Account">
                    <p:menuitem value="Change Password" actionListener="#{employeeLoginManagedBean.changePassword}" />
                </p:submenu>

                <p:submenu label="Log Out">
                    <p:menuitem value="Logout" actionListener="#{employeeLoginManagedBean.doLogOut}" />
                </p:submenu>
            </p:menubar>
        </h:form>
        <!--        <h:form id="formMain">
                    <h1>Manage User Accounts</h1>
        
                    <p:panelGrid>
        
                        <p:row>
                            <p:column>
                                <p:outputLabel for="employeeDepartment" style="font-weight: bold" value="Department: " />
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="employeeDepartment" value=" 
                                                 style="width:125px">
                                    <f:selectItem itemLabel="Please Select" itemValue=" " />
                                    <f:selectItem itemLabel="CEO" itemValue="CEO" />
                                    <f:selectItem itemLabel="Card Department" itemValue="Card Department" />
                                    <f:selectItem itemLabel="Loan Department" itemValue="Loan Department" />
                                    <f:selectItem itemLabel="Sales Department" itemValue="Sales Department" />
                                    <f:selectItem itemLabel="Operation Department" itemValue="Operation Department" />
                                </p:selectOneMenu>            
                            </p:column>
                            <p:column>
                                <p:message for="employeeDepartment" />
                            </p:column>
        
                                                <p:column colspan="2">
                                                    <p:commandButton value="submit" type="submit" actionListener=" update="@form"/>
                                                </p:column>
                        </p:row>
        
        
                    </p:panelGrid>
                </h:form>-->

        <br>
        </br>


        <h:form id="form">
            <p:growl id="msgs" showDetail="true"/>

            <p:dataTable var="employee" id="userAccountTable" editable="true" value="#{employeeAccountManagedBean.employees}" style="margin-bottom:20px" widgetVar="userAccounts">
                <f:facet name="header">
                    User Accounts
                </f:facet>
                <p:ajax event="rowEdit" listener="#{employeeAccountManagedBean.onRowEdit}" update=":form:msgs" />
                <p:ajax event="rowEditCancel" listener="#{employeeAccountManagedBean.onRowCancel}" update=":form:msgs" />


                <!--                <p:column headerText="Id" style="width:5%">
                                    <h:outputText value="#{employee.employeeId}" />
                                </p:column>-->

                <p:column headerText="Name" style="width:10%">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{employee.employeeName}" /></f:facet>
                        <f:facet name="input"><p:inputText value="#{employee.employeeName}" style="width:100%" label="Name"/></f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Department" style="width:10%">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{employee.employeeDepartment}" /></f:facet>
                        <f:facet name="input">
                            <h:selectOneMenu id="employeeDepartment" value="#{employee.employeeDepartment}" 
                                             style="width:125px">
                                <f:selectItems value="#{employeeAccountManagedBean.departments}" var="department" itemLabel="#{department}" itemValue="#{department}" />
                            </h:selectOneMenu>
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Position" style="width:10%">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{employee.employeePosition}" /></f:facet>
                        <f:facet name="input">
                            <h:selectOneMenu id="employeePosition" value="#{employee.employeePosition}" 
                                             style="width:125px">
                                <f:selectItems value="#{employeeAccountManagedBean.positions}" var="position" itemLabel="#{position}" itemValue="#{position}" />
                            </h:selectOneMenu>
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Mobile Num" style="width:10%">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{employee.employeeMobileNum}" /></f:facet>
                        <f:facet name="input"><p:inputText value="#{employee.employeeMobileNum}" style="width:100%"/></f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Email" style="width:20%">
                    <p:cellEditor>
                        <f:facet name="output"><h:outputText value="#{employee.employeeEmail}" /></f:facet>
                        <f:facet name="input"><p:inputText value="#{employee.employeeEmail}" style="width:100%"/></f:facet>
                    </p:cellEditor>
                </p:column>

                <!--                 <p:column headerText="Role" style="width:10%">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                        <h:outputText id="display" style="width:250px;padding-left:5px">
                                            <p:dataList value="#{employeeAccountManagedBean.roles}" var="role">
                #{role}
            </p:dataList>
        </h:outputText>
        </f:facet>
        <f:facet name="input">
             <p:selectCheckboxMenu id="menu" value="#{employee.selectedRoles}" label="Select"
                                  filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                <f:selectItems value="#{employeeAccountManagedBean.roles}" />
            </p:selectCheckboxMenu>
        </f:facet>
    </p:cellEditor>
</p:column>-->


                <p:column style="width:10%">
                    <p:rowEditor />
                </p:column>
                
                <p:contextMenu for="userAccount2" widgetVar="Menu">   
                    <p:menuitem value="Edit Cell" icon="ui-icon-search" onclick="PF('userAccounts').showCellEditor();
                            return false;"/>  
                    <p:menuitem value="Hide Menu" icon="ui-icon-close" onclick="PF('Menu').hide()"/>  
                </p:contextMenu>

                <p:column>
                    <p:commandButton value="Edit Roles"  />
                </p:column>

                <p:column style="width:10%">
                    <!--<h:form>-->

                    <p:growl showDetail="true" />
                    <p:commandButton value="Archive" id="delete" icon="ui-icon ui-icon-trash" onclick="PF('deleteConfirmMsg').show()">
                    </p:commandButton>


                    <p:confirmDialog header="Confirmation" message="Are you sure you want to archive the user account?" showEffect="fade" hideEffect="fade"  widgetVar="deleteConfirmMsg">
                        <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes" action="#{employeeAccountManagedBean.deleteAccount(employee)}" oncomplete="PF('deleteConfirmMsg').hide()" ajax="false"/>
                        <p:commandButton value="No" styleClass="ui-confirmdialog-no" action="#{employeeAccountManagedBean.deleteCancel(employee)}" oncomplete="PF('deleteConfirmMsg').hide()" ajax="false"/>
                    </p:confirmDialog>
                    <!--</h:form>-->
                </p:column>

            </p:dataTable>
        </h:form>



        <h:form>
            <p:row>
                <div align="center">
                <p:button outcome="/web/internalSystem/infrastructure/employeeCreateAccount" value="Add">
               
                </p:button>
                     </div>
            </p:row>
        </h:form>

        </p:panel>

    </h:body>
       </ui:define>
</ui:composition>

